@model List<ResultMessageDto>

@{
    ViewData["Title"] = "Inbox";
    Layout = "~/Views/WebUI/Index.cshtml";
}

<style>
    /* Tabloyu Sabitliyoruz (Taşmaları Engeller) */
    .table-inbox {
        width: 100%;
        table-layout: fixed;
        border-collapse: collapse;
    }

        .table-inbox tbody tr {
            cursor: pointer;
            border-bottom: 1px solid #f1f1f1;
            transition: background-color 0.2s ease;
        }

            .table-inbox tbody tr:hover {
                background-color: #f8f9fa;
            }

            /* Okunma Durumları */
            .table-inbox tbody tr.unread {
                background-color: #ffffff;
            }

                .table-inbox tbody tr.unread .mail-text {
                    font-weight: 700;
                    color: #222;
                }

            .table-inbox tbody tr.read {
                background-color: #fafafa;
            }

                .table-inbox tbody tr.read .mail-text {
                    font-weight: 400;
                    color: #555;
                }

    .mail-summary {
        color: #888;
        font-size: 13px;
    }

    /* İŞTE SİHİRLİ KOD BURASI: Asla alt satıra inmez, sığmazsa ... koyar */
    .truncate-cell {
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        vertical-align: middle !important;
        padding: 15px 10px !important;
    }
</style>

<div class="inbox-area">
    <div class="container">
        <div class="row">

            @await Component.InvokeAsync("_MessageMenuSidebarComponentPartial")

            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <div class="inbox-text-list sm-res-mg-t-30">

                    <div class="form-group">
                        <div class="nk-int-st search-input search-overt">
                            <input type="text" class="form-control" placeholder="Search email..." />
                            <button class="btn search-ib">Search</button>
                        </div>
                    </div>

                    <div class="inbox-btn-st-ls btn-toolbar">
                        <div class="btn-group ib-btn-gp active-hook nk-email-inbox">
                            <a href="/Default/Inbox" class="btn btn-default btn-sm"><i class="notika-icon notika-refresh"></i> Yenile</a>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-next"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-down-arrow"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-trash"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-checked"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-promos"></i></button>
                        </div>
                        <div class="btn-group ib-btn-gp active-hook nk-act nk-email-inbox">
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-left-arrow"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-right-arrow"></i></button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-hover table-inbox">
                            <tbody>

                                @foreach (var message in Model)
                                {
                                    <tr onclick="window.location.href='/Default/ViewEmail/@message.Id';" class="@(message.IsRead ? "read" : "unread")">

                                        <td style="width: 50px; vertical-align: middle; padding: 15px 10px;">
                                            <label style="margin: 0; cursor: pointer;"><input type="checkbox" class="i-checks"></label>
                                        </td>

                                        <td class="truncate-cell" style="width: 25%;">
                                            <span class="mail-text" style="font-size: 14px;" title="Kimden: @message.Sender.Name @message.Sender.Surname">
                                                Kimden: @message.Sender.Name @message.Sender.Surname
                                            </span>
                                        </td>

                                        <td class="truncate-cell" style="width: auto;">
                                            <span class="label label-primary" style="font-size: 11px; padding: 4px 8px; margin-right: 8px; border-radius: 3px;">
                                                @message.Category.Name
                                            </span>

                                            <span class="mail-text" style="font-size: 14px;">
                                                @message.Subject
                                            </span>

                                            <span class="mail-summary">
                                                &nbsp;-&nbsp; @(string.IsNullOrEmpty(message.MessageDetail) ? "" : message.MessageDetail)
                                            </span>
                                        </td>

                                        <td style="width: 50px; text-align: center; vertical-align: middle; padding: 15px 10px;">
                                            @if (!message.IsRead)
                                            {
                                                <i class="notika-icon notika-paperclip" style="color: #a5a5a5; font-size: 16px;"></i>
                                            }
                                        </td>

                                        <td style="width: 140px; text-align: right; vertical-align: middle; padding: 15px 10px; white-space: nowrap;">
                                            <span class="mail-text" style="font-size: 13px;">
                                                @message.SendDate.ToString("dd MMM dddd", new System.Globalization.CultureInfo("tr-TR"))
                                            </span>
                                        </td>

                                    </tr>
                                }
                            </tbody>
                        </table>

                        <div class="pagination-inbox" style="margin-top: 20px; text-align: center;">
                            <ul class="wizard-nav-ac">
                                <li><a class="btn" href="#"><i class="notika-icon notika-back"></i></a></li>
                                <li class="active"><a class="btn" href="#">1</a></li>
                                <li><a class="btn" href="#">2</a></li>
                                <li><a class="btn" href="#">3</a></li>
                                <li><a class="btn" href="#"><i class="notika-icon notika-next-pro"></i></a></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>