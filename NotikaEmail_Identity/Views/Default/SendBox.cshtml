@model List<ResultMessageDto>
@{
    ViewData["Title"] = "SendBox";
    Layout = "~/Views/WebUI/Index.cshtml";
}

<style>
    /* Email Listesi İçin Özel Stiller */
    .table-inbox tbody tr {
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        border-bottom: 1px solid #f1f1f1;
    }

        .table-inbox tbody tr:hover {
            background-color: #f8f9fa;
            box-shadow: inset 2px 0 0 #00c292; /* Sol tarafta hoş bir vurgu çizgisi */
        }

        /* Okunmamış Mail Stilleri */
        .table-inbox tbody tr.unread {
            background-color: #ffffff;
        }

            .table-inbox tbody tr.unread .email-user-name,
            .table-inbox tbody tr.unread .email-subject,
            .table-inbox tbody tr.unread .email-date {
                font-weight: 700;
                color: #222222;
            }

        /* Okunmuş Mail Stilleri */
        .table-inbox tbody tr.read {
            background-color: #fafafa;
        }

            .table-inbox tbody tr.read .email-user-name,
            .table-inbox tbody tr.read .email-subject {
                font-weight: 400;
                color: #555555;
            }

            .table-inbox tbody tr.read .email-date {
                font-weight: 400;
                color: #888888;
            }

    /* Ortak Metin Stilleri */
    .email-user-box {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .email-detail {
        color: #777777;
        font-weight: 400;
        font-size: 13px;
        margin-left: 5px;
    }

    .email-category-badge {
        font-size: 11px;
        padding: 3px 8px;
        border-radius: 4px;
        letter-spacing: 0.5px;
    }

    .email-td {
        vertical-align: middle !important;
        padding: 16px 12px !important;
    }

    /* Tablo genel ayarları */
    .custom-table-wrapper {
        border: none;
    }

    .table-inbox {
        width: 100%;
        table-layout: fixed;
        border-collapse: collapse;
    }
</style>

<div class="inbox-area">
    <div class="container">
        <div class="row">

            @await Component.InvokeAsync("_MessageMenuSidebarComponentPartial")

            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12">
                <div class="inbox-text-list sm-res-mg-t-30">
                    <div class="form-group">
                        <div class="nk-int-st search-input search-overt">
                            <input type="text" class="form-control" placeholder="Search email..." />
                            <button class="btn search-ib">Search</button>
                        </div>
                    </div>
                    <div class="inbox-btn-st-ls btn-toolbar">
                        <div class="btn-group ib-btn-gp active-hook nk-email-inbox">
                            <a href="/Default/SendBox" class="btn btn-default btn-sm"><i class="notika-icon notika-refresh"></i> Yenile</a>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-next"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-down-arrow"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-trash"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-checked"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-promos"></i></button>
                        </div>
                        <div class="btn-group ib-btn-gp active-hook nk-act nk-email-inbox">
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-left-arrow"></i></button>
                            <button class="btn btn-default btn-sm"><i class="notika-icon notika-right-arrow"></i></button>
                        </div>
                    </div>

                    <div class="table-responsive custom-table-wrapper">
                        <table class="table table-hover table-inbox">
                            <tbody>
                                @foreach (var message in Model)
                                {
                                    <tr onclick="window.location.href='/Default/ReceiverViewEmail/@message.Id';" class="@(message.IsRead ? "read" : "unread")">

                                        <td class="email-td" style="width: 45px;">
                                            <label style="margin: 0; cursor: pointer;">
                                                <input type="checkbox" class="i-checks">
                                            </label>
                                        </td>

                                        <td class="email-td" style="width: 25%; min-width: 240px;">
                                            <div class="email-user-box">
                                                <span class="email-user-name" style="font-size: 14px; white-space: nowrap;">
                                                    Kime: @message.Receiver.Name @message.Receiver.Surname
                                                </span>
                                                <span class="label label-primary email-category-badge">
                                                    @message.Category.Name
                                                </span>
                                            </div>
                                        </td>

                                        <td class="email-td" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                            <span class="email-subject" style="font-size: 14px;">
                                                @message.Subject
                                            </span>
                                            <span class="email-detail">
                                                -
                                                @(string.IsNullOrEmpty(message.MessageDetail) ? "" :
                                                                                            (message.MessageDetail.Length < 60 ? message.MessageDetail : message.MessageDetail.Substring(0, 60) + "..."))
                                        </span>
                                    </td>

                                        <td class="email-td text-center" style="width: 45px;">
                                        @if (!message.IsRead)
                                            {
                                                <i class="notika-icon notika-paperclip" style="color: #a5a5a5; font-size: 16px;"></i>
                                            }
                                        </td>

                                        <td class="email-td text-right mail-date" style="width: 150px; white-space: nowrap;">
                                            <span class="email-date" style="font-size: 13px;">
                                                @message.SendDate.ToString("dd MMM dddd", new System.Globalization.CultureInfo("tr-TR"))
                                            </span>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>

                        <div class="pagination-inbox" style="margin-top: 20px; text-align: center;">
                            <ul class="wizard-nav-ac">
                                <li><a class="btn" href="#"><i class="notika-icon notika-back"></i></a></li>
                                <li class="active"><a class="btn" href="#">1</a></li>
                                <li><a class="btn" href="#">2</a></li>
                                <li><a class="btn" href="#">3</a></li>
                                <li><a class="btn" href="#"><i class="notika-icon notika-next-pro"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>