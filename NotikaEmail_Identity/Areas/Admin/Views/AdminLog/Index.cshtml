@model List<AdminLogViewModel>
@{
    ViewData["Title"] = "System Logs";
    Layout = null; 
}

<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Notika Admin Log Viewer</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700&display=swap" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#13ec37",
                        "primary-dark": "#0ea326",
                        "background-dark": "#0a0f0b",
                        "surface-dark": "#111812",
                        "surface-border": "#1f2f22",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        mono: ["JetBrains Mono", "monospace"],
                    },
                },
            },
        }
    </script>
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            background-color: #0d110e;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #1f2f22;
            border-radius: 4px;
        }

            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background-color: #13ec37;
            }

        .scanline {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 4px, 3px 100%;
        }
    </style>
</head>
<body class="bg-background-dark text-slate-300 font-display antialiased overflow-hidden selection:bg-primary/30 selection:text-primary">
    <div class="flex h-screen w-full overflow-hidden">
        <main class="flex-1 flex flex-col min-w-0 bg-background-dark">
            <header class="h-16 border-b border-surface-border bg-surface-dark/50 backdrop-blur-md flex items-center justify-between px-6 sticky top-0 z-10">
                <div class="flex items-center gap-4">
                    <h2 class="text-white text-lg font-bold flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-primary animate-pulse"></span>
                        Live Log Viewer
                    </h2>
                    <span class="px-2 py-0.5 rounded text-[10px] font-mono bg-surface-border text-slate-400 border border-slate-700/50">READ-ONLY</span>
                </div>
                <div class="flex items-center gap-4">
                    <div class="relative group">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500 group-focus-within:text-primary transition-colors">
                            <span class="material-symbols-outlined text-[20px]">search</span>
                        </div>
                        <input class="block w-64 pl-10 pr-3 py-1.5 border border-surface-border rounded-lg leading-5 bg-[#050806] text-slate-300 placeholder-slate-600 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm font-mono transition-all" placeholder="Search logs..." type="text" />
                    </div>
                    <button onclick="location.reload()" class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                </div>
            </header>

            <div class="flex-1 overflow-hidden flex flex-col p-6">
                <div class="flex flex-wrap items-center justify-between gap-4 mb-6">
                    <div class="flex items-center bg-surface-dark rounded-lg p-1 border border-surface-border">
                        <button class="px-4 py-1.5 rounded bg-primary/20 text-primary text-sm font-medium border border-primary/20 shadow-sm transition-all hover:bg-primary/30">All Levels</button>
                        <button class="px-4 py-1.5 rounded text-slate-400 hover:text-white text-sm font-medium transition-colors hover:bg-white/5">Info</button>
                        <button class="px-4 py-1.5 rounded text-slate-400 hover:text-white text-sm font-medium transition-colors hover:bg-white/5">Warning</button>
                        <button class="px-4 py-1.5 rounded text-slate-400 hover:text-white text-sm font-medium transition-colors hover:bg-white/5">Error</button>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-xs text-slate-500 font-mono">Last updated: @DateTime.Now.ToString("HH:mm:ss")</span>
                    </div>
                </div>

                <div class="flex-1 bg-[#0d110e] border border-surface-border rounded-xl overflow-hidden flex flex-col shadow-2xl shadow-black/50 relative">
                    <div class="absolute inset-0 pointer-events-none scanline z-0 opacity-20"></div>

                    <div class="grid grid-cols-12 gap-4 px-6 py-3 border-b border-surface-border bg-surface-dark text-xs font-mono font-semibold uppercase tracking-wider text-slate-500 z-10">
                        <div class="col-span-2">Timestamp</div>
                        <div class="col-span-1">Level</div>
                        <div class="col-span-2">Source</div>
                        <div class="col-span-7">Message Payload</div>
                    </div>

                    <div class="overflow-y-auto flex-1 p-2 font-mono text-sm z-10 custom-scrollbar">
                        @if (Model == null || !Model.Any())
                        {
                            <div class="flex flex-col items-center justify-center h-full text-center p-10 opacity-50">
                                <span class="material-symbols-outlined text-6xl text-red-500 mb-4">database_off</span>
                                <h3 class="text-xl font-bold text-white">Hacı liste boş geldi!</h3>
                                <p class="text-slate-500 max-w-md">Ya Seq'te log yok, ya filtre yanlış, ya da API Key'de "Read" izni hala aktif değil.</p>
                            </div>
                        }
                        else
                        {
                            @foreach (var item in Model)
                            {
                                var levelClass = item.Level switch
                                {
                                    "Error" or "Fatal" => "border-red-500 text-red-400 bg-red-500/10",
                                    "Warning" or "Warn" => "border-yellow-500 text-yellow-200/80 bg-yellow-500/10",
                                    _ => "border-primary text-slate-400 bg-primary/10"
                                };

                                var badgeClass = item.Level switch
                                {
                                    "Error" or "Fatal" => "bg-red-500/10 text-red-500 border-red-500/20",
                                    "Warning" or "Warn" => "bg-yellow-500/10 text-yellow-500 border-yellow-500/20",
                                    _ => "bg-primary/10 text-primary border-primary/20"
                                };

                                <div class="group grid grid-cols-12 gap-4 px-4 py-2.5 rounded hover:bg-white/5 border-l-2 border-transparent transition-all items-start mb-1 @(item.Level == "Error" ? "hover:border-red-500" : "hover:border-primary")">
                                    <div class="col-span-2 text-slate-500 text-[11px] mt-1">@item.Timestamp.ToString("yyyy-MM-dd HH:mm:ss")</div>
                                    <div class="col-span-1">
                                        <span class="px-2 py-0.5 rounded text-[10px] font-bold border @badgeClass">@item.Level.ToUpper()</span>
                                    </div>
                                    <div class="col-span-2 text-primary/80 text-xs mt-0.5">Notika_App</div>
                                    <div class="col-span-7 break-words @(item.Level == "Error" ? "text-red-400" : (item.Level == "Warning" ? "text-yellow-200/80" : "text-slate-400"))">
                                        @item.Message
                                    </div>
                                </div>
                            }
                        }
                    </div>

                    <div class="bg-surface-dark border-t border-surface-border px-4 py-2 flex items-center gap-2 text-xs font-mono text-slate-500">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <span>Connected to Seq: localhost:5341</span>
                        <span class="ml-auto">Displaying @(Model?.Count ?? 0) records</span>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>